'use strict';

var _require = require('child_process'),
    spawnSync = _require.spawnSync;

var _require2 = require('fs'),
    readdirSync = _require2.readdirSync;

var _require3 = require('path'),
    join = _require3.join;

var files = readdirSync(__dirname).sort();
var _iteratorNormalCompletion = true;
var _didIteratorError = false;
var _iteratorError = undefined;

try {
  for (var _iterator = files[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
    var filename = _step.value;

    if (filename.startsWith('test-')) {
      var path = join(__dirname, filename);
      console.log("> Running ".concat(filename, " ..."));
      var result = spawnSync("".concat(process.argv0, " ").concat(path), {
        shell: true,
        stdio: 'inherit',
        windowsHide: true
      });
      if (result.status !== 0) process.exitCode = 1;
    }
  }
} catch (err) {
  _didIteratorError = true;
  _iteratorError = err;
} finally {
  try {
    if (!_iteratorNormalCompletion && _iterator["return"] != null) {
      _iterator["return"]();
    }
  } finally {
    if (_didIteratorError) {
      throw _iteratorError;
    }
  }
}