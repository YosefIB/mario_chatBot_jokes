"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.enableDismissTrigger = void 0;

var _eventHandler = _interopRequireDefault(require("../dom/event-handler.js"));

var _selectorEngine = _interopRequireDefault(require("../dom/selector-engine.js"));

var _index = require("./index.js");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

/**
 * --------------------------------------------------------------------------
 * Bootstrap util/component-functions.js
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
 * --------------------------------------------------------------------------
 */
var enableDismissTrigger = function enableDismissTrigger(component) {
  var method = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hide';
  var clickEvent = "click.dismiss".concat(component.EVENT_KEY);
  var name = component.NAME;

  _eventHandler["default"].on(document, clickEvent, "[data-bs-dismiss=\"".concat(name, "\"]"), function (event) {
    if (['A', 'AREA'].includes(this.tagName)) {
      event.preventDefault();
    }

    if ((0, _index.isDisabled)(this)) {
      return;
    }

    var target = _selectorEngine["default"].getElementFromSelector(this) || this.closest(".".concat(name));
    var instance = component.getOrCreateInstance(target); // Method argument is left, for Alert and only, as it doesn't implement the 'hide' method

    instance[method]();
  });
};

exports.enableDismissTrigger = enableDismissTrigger;